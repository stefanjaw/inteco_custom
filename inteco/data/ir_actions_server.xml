<?xml version='1.0' encoding='UTF-8'?>
<odoo noupdate="1">

    <record model="base.automation" id="action_rule_validate_high_rounding">
        <field name="name">Log Attachments Frequently</field>
        <field name="model_id" ref="base.model_ir_attachment"/>
        <field name="active">True</field>
        <field name="trigger">on_write</field>
<!--        <field name="filter_pre_domain" eval="[('frequently', '=', True)]"/>-->
        <field name="state">code</field>
        <field name="code">
# Available locals:
#  - time, datetime, dateutil: Python libraries
#  - env: Odoo Environement
#  - model: Model of the record on which the action is triggered
#  - object: Record on which the action is triggered if there is one, otherwise None
#  - workflow: Workflow engine
#  - Warning: Warning Exception to use with raise
# To return an action, assign: action = {...}
for r in records:
    if r.frequently:
        url_parts = r.url and r.url.split('/') or []
        if len(url_parts):
            log('Amazon S3 updated: id=%s, name=%s, hash=%s' % (r.id, r.name, url_parts[-1]))
        else:
            log('Amazon S3 updated: id=%s, name=%s, checksum=%s' % (r.id, r.name, r.checksum))
        </field>
    </record>
</odoo>
