<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="inteco_importer_tree" model="ir.ui.view">
        <field name="name">inteco.importer.form</field>
        <field name="model">inteco.importer</field>
        <field name="arch" type="xml">
            <tree>
                <field name="models_available"/>
            </tree>
        </field>
    </record>
    <record id="inteco_importer_form" model="ir.ui.view">
        <field name="name">inteco.importer.form</field>
        <field name="model">inteco.importer</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="Import Records" class="btn-primary"
                            type="object" name="import_records"/>
                </header>
                <sheet>
                    <group>
                        <field name="models_available" required="1"/>
                        <field name="csv_file"/>
                        <field name="log_errors"/>
                    </group>
                    <newline/>
                        <div attrs="{'invisible': [('models_available', '!=', 'committee')]}">
                            <img src="/inteco/static/src/img/committee_csv.png" alt="committee" width="100%"/>
                        </div>
                        <div attrs="{'invisible': [('models_available', '!=', 'product')]}">
                            <img src="/inteco/static/src/img/product_csv.png" alt="product" width="100%"/>
                        </div>
                        <div attrs="{'invisible': [('models_available', '!=', 'ics')]}">
                            <img src="/inteco/static/src/img/ics_csv.png" alt="ics" width="100%"/>
                        </div>
                        <div>
                            <span class="oe_form_label_help">CSV file must be like this image. If there is an unrecognized column, the file will not be loaded</span>
                        </div>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="action_inteco_importer_form" model="ir.actions.act_window">
        <field name="name">Sync products from website</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">inteco.importer</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="inteco_importer_tree"/>
    </record>
    
    <menuitem
        groups="base.group_no_one"
        name="Import"
        id="inteco"
        web_icon="inteco,static/description/importer.png"
        sequence="10"/>
    
    <menuitem
        name="Syncronization"
        id="syncronization"
        parent="inteco"/>
    
    <menuitem name="Download" id="sync_inteco"
              action="action_inteco_importer_form"
              parent="syncronization"/>
</odoo>
